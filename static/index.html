<html lang="en" ng-app="e2presets">

<head>
	<title>Encore2 Control</title>

	<meta charset="utf-8">
	<meta content="width=device-width, initial-scale=1" name="viewport" />
	
	<!-- jQuery -->
	<script src="lib/jquery-1.11.2.min.js"></script>
	<script src="lib/jquery-migrate-1.2.1.min.js"></script>

	<!-- Bootstrap -->
	<link rel="stylesheet" href="bootstrap-3.3.2-dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="bootstrap-3.3.2-dist/css/bootstrap-theme.min.css">

	<script src="bootstrap-3.3.2-dist/js/bootstrap.min.js"></script>
	
	<!-- Angular -->
	<script src="lib/angular.min.js"></script>

	<script src="lib/ng-websocket.js"></script>
	<script src="lib/ui-bootstrap-tpls-0.12.0.min.js"></script>
	
	<!-- qmsk-e2 -->
	<link rel="stylesheet" href="qmsk.e2/client.css">
	<script src="qmsk.e2/client.js"></script>
</head>

<body>

<div class="container-fluid" id="container" ng-controller="PresetsCtrl">

    <div id="header" class="navbar" ng-class="{'safe': safe}">
		<div class="navbar-header">
			<a class="navbar-brand" href="/">
				Encore2 Control
			</a>
		</div>

		<!-- <div class="navbar-collapse">
			<ul class="nav navbar-nav">

			</ul>
		</div> -->

        <p class="navbar-text navbar-right safe-mode" ng-if="safe">
            SAFE MODE @ {{server}}
        </p>
        <p class="navbar-text navbar-right live-mode" ng-if="!safe">
            LIVE @ {{server}}
        </p>
	</div>

	<div id="tools">
		<button name="cut" id="cut" type="submit" ng-click="cut()">
			Cut
		</button>
		<button name="autotrans" id="autotrans" ng-click="autotrans()">
			Auto Trans
		</button>
	</div>

	<div id="presets" class="presets">
		<!-- ng-class="{'btn-success': preset == base.inPreview, 'btn-danger': preset == base.inPgm}" -->
		<div class="group" ng-repeat="group in data.groups" ng-if="group.presets.length > 0">
			<div class="title" ng-click="collapsedGroups[group.title] = !collapsedGroups[group.title]">
				<button type="button">
					<span class="glyphicon"
						ng-class="collapsedGroups[group.title] ? 'glyphicon-plus' : 'glyphicon-minus'"
					></span>
				</button>
				
				<h3>{{group.title}}</h3>
			</div>
			<div collapse="collapsedGroups[group.title]">
				<button type="button" class="preset"
						ng-repeat="preset in group.presets"
						ng-class="{'preview': data.presets[preset].preview, 'program': data.presets[preset].program, 'active': data.presets[preset].active}"
						ng-click="clickPreset(preset)">
					{{data.presets[preset].title}}
					<div ng-repeat="(dest, where) in data.presets[preset].destinations">
						<span class="destination"
						ng-class="{'preview': where == 'preview', 'program': where == 'program', 'inactive': where == undefined}">
							{{dest}}
						</span>
					</div>
				</button>
			</div>
		</div>
	</div>
		
	<div id="status">
		<div ng-repeat="stat in status">{{stat.msg}} {{stat.data}}</div>
	</div>
</div>

</body>

</html>
